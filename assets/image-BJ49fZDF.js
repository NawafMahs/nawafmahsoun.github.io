import{j as e}from"./jsx-runtime-i88aexF6.js";import{r as t}from"./vendor-react-vendor-C-CbGDQp.js";import{c as n,d as a,t as s,e as o,b as r,B as i,I as c,n as l}from"./heading-BdKyha8q.js";import{u as f}from"./vendor-animation-vendor-CcTNfguF.js";const d="/assets/gotham-book-Bnaws0Ef.woff2",m="/assets/gotham-medium-0VT3RO8I.woff2",u=t.createContext({}),h=({theme:t="dark",children:a,className:s,as:o="div",toggleTheme:r,...i})=>{const c=y(),l=!c.theme;return e.jsxs(u.Provider,{value:{theme:t,toggleTheme:r||c.toggleTheme},children:[l&&a,!l&&e.jsx(o,{className:n(s),"data-theme":t,...i,children:a})]})};function y(){return t.useContext(u)}function p(e){return e.replace(/\s\s+/g," ")}function g(e){return p(Object.keys(e).map(t=>`--${t}: ${e[t]};`).join("\n\n"))}const w=p("\n  @layer theme, base, components, layout;\n"),v=p(`\n  :root {\n    ${g(s.base)}\n  }\n\n  ${p(Object.keys(a).map(e=>`\n        @media (max-width: ${a[e]}px) {\n          :root {\n            ${g(s[e])}\n          }\n        }\n      `).join("\n"))}\n\n  [data-theme='dark'] {\n    ${g(o.dark)}\n  }\n\n  [data-theme='light'] {\n    ${g(o.light)}\n  }\n`),b=p(`\n  @font-face {\n    font-family: Gotham;\n    font-weight: 400;\n    src: url(${d}) format('woff2');\n    font-display: block;\n    font-style: normal;\n  }\n\n  @font-face {\n    font-family: Gotham;\n    font-weight: 400;\n    src: url(/assets/gotham-book-italic-Bm2IEtSK.woff2) format('woff2');\n    font-display: block;\n    font-style: italic;\n  }\n\n  @font-face {\n    font-family: Gotham;\n    font-weight: 500;\n    src: url(${m}) format('woff2');\n    font-display: block;\n    font-style: normal;\n  }\n\n  @font-face {\n    font-family: Gotham;\n    font-weight: 500;\n    src: url(/assets/gotham-medium-italic-Dok430ou.woff2) format('woff2');\n    font-display: block;\n    font-style: italic;\n  }\n\n  @font-face {\n    font-family: Gotham;\n    font-weight: 700;\n    src: url(/assets/gotham-bold-D1kvQ7KV.woff2) format('woff2');\n    font-display: block;\n    font-style: normal;\n  }\n\n  @font-face {\n    font-family: Gotham;\n    font-weight: 700;\n    src: url(/assets/gotham-bold-italic-C_msAlmW.woff2) format('woff2');\n    font-display: block;\n    font-style: italic;\n  }\n\n  @font-face {\n    font-family: IPA Gothic;\n    font-weight: 400;\n    src: url(/assets/ipa-gothic-DimHCOud.woff2) format('woff2');\n    font-display: swap;\n    font-style: normal;\n  }\n`),j=p(`\n  ${w}\n\n  @layer theme {\n    ${v}\n    ${b}\n  }\n`);function S(e,n,a={},s=!0){const[o,r]=t.useState(!1),[i,c]=t.useState(!1);return t.useEffect(()=>{if(!e?.current)return;const t=new IntersectionObserver(([e])=>{const{isIntersecting:a,target:s}=e;r(a),a&&n&&(t.unobserve(s),c(!0))},a);return!i&&s&&t.observe(e.current),()=>t.disconnect()},[e,n,a,i,s]),o}async function k({srcSet:e,sizes:t}){const n=await Promise.all(e.split(", ").map(async e=>{const[t,n]=e.split(" "),a=Number(n.replace("w","")),s=await async function(e=1,t=1){return new Promise(n=>{const a=document.createElement("canvas"),s=a.getContext("2d");a.width=e,a.height=t,s.fillStyle="rgba(0, 0, 0, 0)",s.fillRect(0,0,e,t),a.toBlob(async e=>{if(!e)throw new Error("Video thumbnail failed to load");const t=URL.createObjectURL(e);a.remove(),n(t)})})}(a);return{src:t,image:s,width:n}})),a=n.map(({image:e,width:t})=>`${e} ${t}`).join(", "),s=await async function({src:e,srcSet:t,sizes:n}){return new Promise((a,s)=>{try{if(!e&&!t)throw new Error("No image src or srcSet provided");let s=new Image;e&&(s.src=e),t&&(s.srcset=t),n&&(s.sizes=n);const o=()=>{s.removeEventListener("load",o);const e=s.currentSrc;s=null,a(e)};s.addEventListener("load",o)}catch(o){s(`Error loading ${t}: ${o}`)}})}({srcSet:a,sizes:t});return n.find(e=>e.image===s).src}const x="_element_4szht_49",$=({className:a,style:s,reveal:o,delay:i=0,raised:c,src:f,srcSet:d,placeholder:m,...u})=>{const[h,p]=t.useState(!1),{theme:g}=y(),w=t.useRef(),v=f||d.split(" ")[0],b=S(w,!z(v)),j=t.useCallback(()=>{p(!0)},[]);return e.jsx("div",{className:n("_image_4szht_2",a),"data-visible":b||h,"data-reveal":o,"data-raised":c,"data-theme":g,style:r({delay:l(i)},s),ref:w,children:e.jsx(_,{delay:i,onLoad:j,loaded:h,inViewport:b,reveal:o,src:v,srcSet:d,placeholder:m,...u})})},_=({onLoad:n,loaded:a,inViewport:s,srcSet:o,placeholder:d,delay:m,src:u,alt:h,play:y=!0,restartOnPause:p,reveal:g,sizes:w,width:v,height:b,noPauseButton:j,cover:S,...$})=>{const _=f(),[E,N]=t.useState(!0),[P,I]=t.useState(!_),[G,L]=t.useState(),[C,O]=t.useState(!1),R=t.useRef(),T=t.useRef(),B=z(u),V=s,D=function(){const[e,n]=t.useState(!1);return t.useEffect(()=>{n(!0)},[]),e}();return t.useEffect(()=>{B&&o?(async()=>{const e=await k({srcSet:o,sizes:w});L(e)})():B&&L(u)},[B,w,u,o]),t.useEffect(()=>{if(!T.current||!G)return;const e=()=>{I(!1),T.current.pause()};y||(e(),p&&(T.current.currentTime=0)),C||(s?s&&!_&&y&&(I(!0),T.current.play()):e())},[s,y,_,p,C,G]),e.jsxs("div",{className:"_elementWrapper_4szht_49","data-reveal":g,"data-visible":s||a,style:r({delay:l(m+1e3)}),children:[B&&D&&e.jsxs(t.Fragment,{children:[e.jsx("video",{muted:!0,loop:!0,playsInline:!0,className:x,"data-loaded":a,"data-cover":S,autoPlay:!_,onLoadStart:n,src:G,"aria-label":h,ref:T,...$}),!j&&e.jsxs(i,{className:"_button_4szht_104",onClick:e=>{e.preventDefault(),O(!0),T.current.paused?(I(!0),T.current.play()):(I(!1),T.current.pause())},children:[e.jsx(c,{icon:P?"pause":"play"}),P?"Pause":"Play"]})]}),!B&&e.jsx("img",{className:x,"data-loaded":a,"data-cover":S,onLoad:n,decoding:"async",src:V?u:void 0,srcSet:V?o:void 0,width:v,height:b,alt:h,sizes:w,...$}),E&&e.jsx("img",{"aria-hidden":!0,className:"_placeholder_4szht_71","data-loaded":a,"data-cover":S,style:r({delay:l(m)}),ref:R,src:d,width:v,height:b,onTransitionEnd:()=>N(!1),decoding:"async",loading:"lazy",alt:"",role:"presentation"})]})};function z(e){return"string"==typeof e&&e.includes(".mp4")}export{m as G,$ as I,h as T,d as a,S as b,k as r,j as t,y as u};
